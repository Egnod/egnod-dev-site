<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Alexander (Egnod) Lavrov" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Alexander (Egnod) Lavrov" /> <title> –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ Flask-Potion. –ß–∞—Å—Ç—å 0. - Alexander (Egnod) Lavrov </title> <link rel="alternate" href="http://egnod.dev/flask-potion-library-0/" hreflang="en-US" /> <link rel="canonical" href="http://egnod.dev/flask-potion-library-0/" /> <meta name="description" content="–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ Flask-Potion" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ Flask-Potion. –ß–∞—Å—Ç—å 0. | " /> <meta property="og:title" content="–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ Flask-Potion. –ß–∞—Å—Ç—å 0. | " /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://egnod.dev/flask-potion-library-0/" /> <meta property="og:description" content="–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ Flask-Potion" /> <meta property="og:image" content="http://egnod.dev/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ Flask-Potion. –ß–∞—Å—Ç—å 0. | " /> <meta name="twitter:url" content="http://egnod.dev/flask-potion-library-0/" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:description" content="–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ Flask-Potion" /> <meta name="twitter:image" content="http://egnod.dev/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://egnod.dev/feed.xml" title="Alexander (Egnod) Lavrov" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="dark"> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"> <a class="menu-link" href="/">home</a> <a class="menu-link" href="https://github.com/egnod" target="_blank" rel="noopener" >github</a > <a class="menu-link" href="https://habr.com/en/users/egnodus/posts/" target="_blank" rel="noopener" >habr</a > <a class="menu-link" href="https://dev.to/egnod" target="_blank" rel="noopener" >dev.to</a > <a class="menu-link" href="https://egnod.medium.com/" target="_blank" rel="noopener" >medium</a > <a class="menu-link" href="https://keybase.io/egnod" target="_blank" rel="noopener" >keybase</a > <a class="menu-link" href="https://www.linkedin.com/in/aleksander-lavrov-52283b19b" target="_blank" rel="noopener" >linkedin</a > <a class="menu-link" href="https://egnod.keybase.pub/rootCA.pem" target="_blank" rel="noopener" >CA</a > </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/tags/#python">PYTHON</a>, <a class="tag" href="/tags/#docker">DOCKER</a>, <a class="tag" href="/tags/#flask">FLASK</a>, <a class="tag" href="/tags/#sql">SQL</a>, <a class="tag" href="/tags/#sitri">SITRI</a> </span> </div> <h1 class="header-title" itemprop="headline">–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ Flask-Potion. –ß–∞—Å—Ç—å 0.</h1> <div class="post-meta"> <time datetime="2019-10-18T00:00:00+03:00" itemprop="datePublished"> Oct 18, 2019 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Alexander (Egnod) Lavrov</span> </span> <span itemprop="publisher" itemtype="Organization"> <span itemprop="url">with <a href="https://habr.com/ru/post/472018/">HABR Originals</a>üíó</span> </span> <time hidden datetime="2019-10-18T00:00:00+03:00" itemprop="dateModified"> Oct 18, 2019 </time> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><h1 id="–≤–≤–µ–¥–µ–Ω–∏–µ">–í–≤–µ–¥–µ–Ω–∏–µ</h1> <p>–í —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ —è —É–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑—É—é <a href="https://potion.readthedocs.io">Flask-Potion</a> - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è—é—Ç—Å—è: –≤–µ—Å—å–º–∞ —É–¥–æ–±–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SQLAlchemy –º–æ–¥–µ–ª—è–º–∏, –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è crud-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –Ω–∞–ª–∏—á–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ <a href="https://github.com/biosustain/potion-client">potion-client</a> (–≤–µ—Å—å–º–∞ —É–¥–æ–±–Ω–æ–≥–æ, –µ—Å–ª–∏ –ø–∏—à–µ—à—å API —Å–µ—Ä–≤–∏—Å–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–∏—Å–µ).</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <h1 id="–≤–≤–µ–¥–µ–Ω–∏–µ"> <a href="#–≤–≤–µ–¥–µ–Ω–∏–µ" class="anchor-head"></a> –í–≤–µ–¥–µ–Ω–∏–µ </h1> <p>–í —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ —è —É–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑—É—é <a href="https://potion.readthedocs.io">Flask-Potion</a> - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è—é—Ç—Å—è: –≤–µ—Å—å–º–∞ —É–¥–æ–±–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SQLAlchemy –º–æ–¥–µ–ª—è–º–∏, –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è crud-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –Ω–∞–ª–∏—á–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ <a href="https://github.com/biosustain/potion-client">potion-client</a> (–≤–µ—Å—å–º–∞ —É–¥–æ–±–Ω–æ–≥–æ, –µ—Å–ª–∏ –ø–∏—à–µ—à—å API —Å–µ—Ä–≤–∏—Å–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–∏—Å–µ).</p> <p>–Ø –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –æ flask-potion –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç, –Ω–æ –¥—É–º–∞—é –∫–æ–º—É-—Ç–æ —ç—Ç–æ –¥–∞–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º.</p> <p>–í–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –æ–±–∑–æ—Ä–Ω–æ–π —Å—Ç–∞—Ç—å–∏ –Ω–∞ —ç—Ç–æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —è —Ä–µ—à–∏–ª –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞—Ç–µ–π –æ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚ÄúFurfur‚Äù –Ω–∞ –æ—Å–Ω–æ–≤–µ Flask-Potion.</p> <p>–î–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ç—å –¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:</p> <ul> <li>–•—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–∞—Ö (isbn, –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä –∏ —Ç.–¥.)</li> <li>–•—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö (—á–∏—Ç–∞—Ç–µ–ª–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä–∏)</li> <li>–û—Ñ–æ—Ä–º–ª—è—Ç—å –≤—ã–¥–∞—á—É –∫–Ω–∏–≥–∏ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Å—Ä–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–¥–ª–µ–Ω–∏—è</li> </ul> <p>–í —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ –º—ã –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —Å–ª–µ–¥—É—é—â–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏:</p> <ul> <li>PostgreSQL</li> <li>Flask, Flask-SQLAlchemy, Flask-JWT, Flask-Potion, Flask-Migrate</li> </ul> <h1 id="–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞"> <a href="#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞" class="anchor-head"></a> –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ </h1> <h2 id="—Å–∫–µ–ª–µ—Ç"> <a href="#—Å–∫–µ–ª–µ—Ç" class="anchor-head"></a> –°–∫–µ–ª–µ—Ç </h2> <p>–ß—Ç–æ–±—ã –Ω–µ —Å–æ–±–∏—Ä–∞—Ç—å —Å–∫–µ–ª–µ—Ç –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ —Å–∞–º–∏–º, –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è cookiecutter-—à–∞–±–ª–æ–Ω–æ–º <a href="https://clck.ru/JVaLP">Valefor</a>, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –¥–∞–∂–µ –±–æ–ª—å—à–µ.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cookiecutter gh:lemegetonx/valefor
</code></pre></div></div> <p>–≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –¥–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</p> <ol> <li>app - –æ—Å–Ω–æ–≤–Ω–æ–µ. –°–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è jwt, mixin –∫–ª–∞—Å—Å—ã –¥–ª—è potion —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ sqlalchemy –º–æ–¥–µ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –ø–∞–∫–µ—Ç —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</li> <li>user - –Ω–∞ —Å—Ç–∞—Ä—Ç–µ —à–∞–±–ª–æ–Ω–∞, —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</li> </ol> <h2 id="—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"> <a href="#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π" class="anchor-head"></a> –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π </h2> <p>–í —à–∞–±–ª–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è poetry –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–æ —Å –Ω–µ–¥–∞–≤–Ω–∏—Ö –ø–æ—Ä pip —Ç–æ–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç <em>pyproject.toml</em>, –ø–æ—ç—Ç–æ–º—É —Ç—É—Ç –≤—ã–±–æ—Ä –∑–∞ –≤–∞–º–∏. –Ø –≤–æ—Å–ø–æ–ª—å–∑—É—é—Å—å poetry.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">install</span>
</code></pre></div></div> <h2 id="–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è"> <a href="#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è" class="anchor-head"></a> –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è </h2> <p>–î–ª—è —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ —à–∞–±–ª–æ–Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ sitri. –ù–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –æ–±—ä–µ–∫—Ç–∞ Sitri.</p> <ol> <li>–ò–∑–º–µ–Ω–∏–º <em>app/config/provider.py</em>. –ó–∞–º–µ–Ω–∏–º <em>SystemCredentialProvider</em> –Ω–∞ <em>YamlCredentialProvider</em>, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –±—Ä–∞–ª–∏—Å—å –∏–∑ —Ñ–∞–π–ª–∞ <em>credential.yaml</em>, –¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ—Ç–æ—Ä—ã–π –≤ –∫–æ–º–º–∏—Ç—ã –º—ã –Ω–µ –±—É–¥–µ–º:</li> </ol> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">sitri</span> <span class="kn">import</span> <span class="n">Sitri</span>  
<span class="kn">from</span> <span class="nn">sitri.contrib.yaml</span> <span class="kn">import</span> <span class="n">YamlConfigProvider</span><span class="p">,</span> <span class="n">YamlCredentialProvider</span>
  
<span class="n">configuration</span> <span class="o">=</span> <span class="n">Sitri</span><span class="p">(</span>  
    <span class="n">config_provider</span><span class="o">=</span><span class="n">YamlConfigProvider</span><span class="p">(</span><span class="n">yaml_path</span><span class="o">=</span><span class="s">"./config.yaml"</span><span class="p">),</span>  
    <span class="n">credential_provider</span><span class="o">=</span><span class="n">YamlCredentialProvider</span><span class="p">(</span><span class="n">yaml_path</span><span class="o">=</span><span class="s">"./credential.yaml"</span><span class="p">),</span>  
<span class="p">)</span>
</code></pre></div></div> <p>P.S. –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —á—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–µ–≥—á–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤ <a href="https://sitri.readthedocs.io">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a>, –µ—Å–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ, —Ç–æ —Å–µ–π—á–∞—Å –º—ã –ø—Ä–æ—Å—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –æ—Ç–∫—É–¥–∞ –±—É–¥–µ–º –±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.</p> <ol> <li>–†–∞–∑ —É–∂ –º—ã —Å–¥–µ–ª–∞–ª–∏ –ø–æ —Å—É—Ç–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, —Ç–æ –ª—É—á—à–µ –≤ <em>database.py</em> –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∏–∂–Ω–∏–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –≤ –∫–ª—é—á–∞—Ö –≤ –≤—ã–∑–æ–≤–µ <em>get_credential</em> –Ω–∞ —Ç–æ—á–∫–∏.</li> </ol> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">DB_NAME</span> <span class="o">=</span> <span class="n">configuration</span><span class="p">.</span><span class="n">get_credential</span><span class="p">(</span><span class="s">"db.name"</span><span class="p">,</span> <span class="n">path_mode</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  
<span class="n">DB_HOST</span> <span class="o">=</span> <span class="n">configuration</span><span class="p">.</span><span class="n">get_credential</span><span class="p">(</span><span class="s">"db.host"</span><span class="p">,</span> <span class="n">path_mode</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  
<span class="n">DB_PASSWORD</span> <span class="o">=</span> <span class="n">configuration</span><span class="p">.</span><span class="n">get_credential</span><span class="p">(</span><span class="s">"db.user.password"</span><span class="p">,</span> <span class="n">path_mode</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  
<span class="n">DB_PORT</span> <span class="o">=</span> <span class="n">configuration</span><span class="p">.</span><span class="n">get_credential</span><span class="p">(</span><span class="s">"db.port"</span><span class="p">,</span> <span class="n">path_mode</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  
<span class="n">DB_USER</span> <span class="o">=</span> <span class="n">configuration</span><span class="p">.</span><span class="n">get_credential</span><span class="p">(</span><span class="s">"db.user.name"</span><span class="p">,</span> <span class="n">path_mode</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <p>–ò—Ç–∞–∫, —Ñ–∞–π–ª <em>config.yaml</em> —É–∂–µ –±—ã–ª –≤ —à–∞–±–ª–æ–Ω–µ, –∞ –≤–æ—Ç <em>credential.yaml</em> –¥–æ–ª–∂–Ω—ã –Ω–∞–ø–∏—Å–∞—Ç—å —Å–∞–º–∏. –í —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏ –ø–æ–¥–æ–±–Ω—ã–µ —Ñ–∞–π–ª—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ .gitignore, –Ω–æ —è –¥–æ–±–∞–≤–ª—é —à–∞–±–ª–æ–Ω <em>credential.yaml</em> –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —á—Ç–æ–±—ã –µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ã–ª–∞ –ø–æ–Ω—è—Ç–Ω–∞ –ª—é–±–æ–º—É, –∫—Ç–æ –∑–∞–π–¥—ë—Ç –≤ –ø—Ä–æ–µ–∫—Ç.</p> <p>–ë–∞–∑–æ–≤—ã–π <em>credential.yaml</em>:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">db</span><span class="pi">:</span>  
  <span class="na">name</span><span class="pi">:</span> <span class="s">furfur_db</span>  
  <span class="na">host</span><span class="pi">:</span> <span class="s">localhost</span>  
  <span class="na">port</span><span class="pi">:</span> <span class="s">5432</span>  
  <span class="na">user</span><span class="pi">:</span>  
    <span class="na">password</span><span class="pi">:</span> <span class="s">passwd</span>  
    <span class="na">name</span><span class="pi">:</span> <span class="s">admin</span>
</code></pre></div></div> <h2 id="–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö"> <a href="#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö" class="anchor-head"></a> –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö </h2> <p>–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø –Ω–∞—à–µ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ - —ç—Ç–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –°–£–ë–î, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ PostgreSQL. –Ø –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Å–¥–µ–ª–∞—é <em>stack.yaml</em> —Ñ–∞–π–ª, –≥–¥–µ –æ–ø–∏—à—É –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ postgres —Å –Ω—É–∂–Ω—ã–º–∏ –¥–ª—è –Ω–∞—Å –¥–∞–Ω–Ω—ã–º–∏.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.1'</span>

<span class="na">services</span><span class="pi">:</span>

  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">POSTGRES_PASSWORD</span><span class="pi">:</span> <span class="s">passwd</span>
      <span class="na">POSTGRES_USER</span><span class="pi">:</span> <span class="s">admin</span>
      <span class="na">POSTGRES_DB</span><span class="pi">:</span> <span class="s">furfur_db</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">5432:5432</span>
</code></pre></div></div> <p>–ö–∞–∫ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å —Ä–∞–Ω–µ–µ, –≤ —Å–æ—Å—Ç–∞–≤ —à–∞–±–ª–æ–Ω–∞ valefor –≤—Ö–æ–¥–∏—Ç –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å User, –Ω—É–∂–Ω–∞—è –¥–ª—è —Ä–∞–±–æ—Ç—ã JWT (—Ö–µ–Ω–¥–ª–µ—Ä–æ–≤), –ø–æ—ç—Ç–æ–º—É –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ë–î - —ç—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).</p> <p>–ù–∞—Ö–æ–¥—è—Å—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">FLASK_APP</span><span class="o">=</span>furfur.app

flask db init
flask db migrate
flask db upgrade
</code></pre></div></div> <p>–í—Å—ë, —Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –ë–î, –∫–∞–∫ –∏ –≤ —Ü–µ–ª–æ–º –æ—Å–Ω–æ–≤—ã –¥–ª—è –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã, –º—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏.</p> <h1 id="—á—Ç–æ-–¥–∞–ª—å—à–µ"> <a href="#—á—Ç–æ-–¥–∞–ª—å—à–µ" class="anchor-head"></a> –ß—Ç–æ –¥–∞–ª—å—à–µ? </h1> <p>–í —Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏ –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ JWT.</p> <p><a href="https://github.com/Egnod/furfur">–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞</a> <br /> <a href="https://github.com/Egnod/furfur/releases/tag/0.0.2">–í—Å—ë, —á—Ç–æ –∏–∑–ª–æ–∂–µ–Ω–æ –≤ –¥–∞–Ω–Ω–æ–π —á–∞—Å—Ç–∏</a></p> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-next" href="/python-teach/"> <div class="nav-arrow">Next</div> <span class="post-title">–ö–∞–∫ —è –ø—Ä–µ–ø–æ–¥–∞–≤–∞–ª, –∞ –ø–æ—Ç–æ–º –º–µ—Ç–æ–¥–∏—á–∫—É –ø–æ Python –ø–∏—Å–∞–ª</span> </a> </nav> <footer class="footer"> <small class="footer_theme-copyright"> <!-- Klis√© Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klis√©</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> <script src="/assets/js/galite.js"></script> <script> var galite = galite || {}; galite.UA = "G-EPC1XQKFYJ"; </script> </div> </body> </html>
